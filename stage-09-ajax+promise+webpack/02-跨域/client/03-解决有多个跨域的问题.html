<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

<!--
<script>
    function cc(data) {
        console.log(data);
    }
</script>
<script src="http://localhost:3000/?callback=cc"></script>
-->

<script>
    jsonp({
       url: 'http://localhost:3000/',
       data: '',
       success: function (data) {
           console.log(1111);
       }
    });

    jsonp({
        url: 'http://localhost:3000/',
        data: '',
        success: function (data) {
            console.log(2222);
        }
    });

    jsonp({
        url: 'http://localhost:3000/',
        data: '',
        success: function (data) {
            console.log(3333);
        }
    });

    jsonp({
        url: 'http://localhost:3000/',
        data: '',
        success: function (data) {
            console.log(3333);
        }
    });

    jsonp({
        url: 'http://localhost:3000/',
        data: '',
        success: function (data) {
            console.log(3333);
        }
    });

    jsonp({
        url: 'http://localhost:3000/',
        data: '',
        success: function (data) {
            console.log(3333);
        }
    });

    function jsonp(option) {
         // 0. 将用户通过对象的命名空间传递进来的函数挂载到全局
        var callbackName = 'itfh_' + Math.random().toString().substr(2)+ Math.random().toString().substr(2);
        window[callbackName] = option.success;
        // 1. 处理url的拼接
        option.url = option.url + '?callback=' + callbackName;
        // 2. 创建script标签
        var script = document.createElement('script');
        script.src = option.url;
        document.body.appendChild(script);
    }
</script>
</body>
</html>