<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>字符串相关操作</title>
</head>
<body>

<label>上传图片格式验证:</label>
<input type="file" id="file">

<script>
    //1.定义
    var str = '张三';
    var age = 18;

    //2.转化
    console.log(typeof (age + ''));
    console.log(typeof age.toString());
    console.log(typeof String(age));
</script>

<!--======================= 字符串切割============-->
<script>
    let arr = [1, 3, 5];
    let str = arr.join("-");
    console.log(str);
    let str = "1-3-5";
    let arr = str.split("-");
    console.log(arr);
</script>

<!--======================= 获取字符串长度 .length============-->
<script>
    let str = "abcd";
     console.log(str.length);
</script>

<!--=======================2.charAt()返回在指定位置的字符。============-->
<script>
    var str = 'A,Hello, World!';
    var str1 = '你好,世界!';
    console.log(str.charAt(1));
    console.log(str1.charAt(4));
</script>

<!--=======================3.charCodeAt()返回在指定的位置的字符的 Unicode 编码。============-->
<script>
    var str = 'A,Hello, World!';
    var str1 = '你好,世界!';
    console.log(str.charCodeAt(0));
    console.log(str1.charCodeAt(1));
</script>

<!--=======================4.concat()连接字符串。============-->
<script>
    //4.拼接字符串 concat / +
    let str1 = "www";
    let str2 = "taobao";
    let str = str1 + str2; // 推荐
    let str = str1.concat(str2);
    console.log(str);
</script>
<!--=======================5.indexOf()检索字符串。============-->
<!--=======================6.字符串查找 indexOf / lastIndexOf / includes============-->
<script>
    let str = "vavcd";
    let index = str.indexOf("v");
    let index = str.lastIndexOf("v"); //lastIndexOf()()从后向前搜索字符串
    console.log(index);
    let result = str.includes("p");
    console.log(result);
</script>

<!--=======================截取子串 slice / substring / substr============-->
<script>   
    let str = "abcdef";
    // let subStr = str.slice(1, 3);
    // let subStr = str.substring(1, 3);
    let subStr = str.substr(1, 3);
    console.log(subStr);
</script>

<!--=======================7.toLowerCase()把字符串转换为小写。============-->
<!--=======================8.toUpperCase()把字符串转换为大写。。============-->
<script>
    var str = 'hello world!';
    var str1 = 'HELLO WORLD!';
    console.log(str.toUpperCase());
    console.log(str1.toLowerCase());
</script>

<!--======================= es6 startsWith endsWith ============-->
<script>
    //2.判断是否以指定字符串开头 ES6
    let str = "http://www.baidu.com";
    let result = str.startsWith("www");
    console.log(result);


    //3.判断是否以指定字符串结尾 ES6
    let str = "lnj.jpg";
    let result = str.endsWith("png");
    console.log(result);

    let file = 'index.html';
    console.log(file.endsWith('html'));  // true

    let str = 'liaoke';
    console.log(str.includes('ak')); // true

    let title = '淘宝在线';
    console.log(title.repeat(11));

    //  "2030111111"
    let y1 = '2030'.padEnd(10, '1');

    //   "2030-11-22"
    let y2 = '11-22'.padStart(10, '2030-MM-DD');
    console.log(y1, y2);
</script>

<!--======================= es6 模板字符串 ============-->
<script id="模板字符串">
    let name = '张三';
    let gender = '男';
    let result = '我叫:' + name + ', 性别:' + gender;
    let result2 = `我叫: ${name}, 性别: ${gender}`;
    console.log(result);
    console.log(result2);
</script>

<!--======================= es6 模板字符串 ============-->
<script>
    let dArr = ['张三', '李四', '王五', '赵柳'];
    let lis = dArr.map(function (value) {
    return `<li>${value}</li>`
    });
    console.log(lis);

    let div = document.querySelector('#box');
    div.innerHTML = lis.join('');
</script>

<!--======================= es6 模板字符串的实现原理============-->
<script id="模板字符串的实现原理">
    let name1 = '小煤球';
    let sex = '公';
    let result1 = `我叫 ${name1} , 我是 ${sex} 的`;
    result1 = result1.replace(/\${([^}]*)}/g);
    console.log(result1);
</script>

<!--=======================编码=========================-->
<script>
    //encodeURI 和 decodeURI 这两个函数操作的是完整的 URI；这俩函数假定 URI 中的任何保留字符都有特殊意义，所有不会编码它们。
    //encodeURIComponent 可把字符串作为 URI 组件进行编码  该方法不会对 ASCII 字母和数字进行编码，也不会对这些 ASCII 标点符号进行编码： - _ . ! ~ * ' ( )
    //decodeURIComponent 可把字符串作为 URI 组件进行解码
    var str = 'http://www.itfh.com?name=张三&age=18&sex=未知';
    var str1 = 'https://image.baidu.com/search/index?ct=201326592&cl=2&st=-1&lm=-1&nc=1&ie=utf-8&tn=baiduimage&ipn=r&rps=1&pv=&fm=rs3&word=%E6%8D%A7%E8%85%B9%E5%A4%A7%E7%AC%91%E5%93%88%E5%93%88%E5%93%88%E8%A1%A8%E6%83%85%E5%8C%85&oriquery=%E5%93%88%E5%93%88%E5%93%88&ofr=%E5%93%88%E5%93%88%E5%93%88&sensitive=0';

    // 1.编码
    var encodeStr = encodeURIComponent(str);
    console.log(encodeStr);

    // 2.解码
    var decodeStr = decodeURIComponent(str1);
    console.log(decodeStr);
</script>

<!--=======================格式验证=========================-->
<script>
    /* jpg png gif bmp webp JPG*/
    window.onload = function () {
        // 1. 获取标签
        var file = document.getElementById('file');
        // 2. 监听作用域的变化
        file.onchange = function () {
            // 2.1 获取上传图片的路径
            var path =  this.value;
            // console.log(path);

            // 2.2 截取字符串
            var suffix = path.substr(path.lastIndexOf('.'));
            // console.log(suffix);

            // 2.3 统一转成小写
            var lower_suffix = suffix.toLowerCase();

            // 2.4 判断
            if(
                lower_suffix === '.jpg' ||
                lower_suffix === '.png' ||
                lower_suffix === '.gif' ||
                lower_suffix === '.bmp' ||
                lower_suffix === '.webp'
            ){
                alert('上传图片的格式正确');
            }else {
                alert('上传图片的格式不正确');
            }
        }
    }
</script>



</body>
</html>